//
//  CountriesDao.swift
//  Coronavirus.INFO
//
//  Created by Edward on 13.04.2020.
//  Copyright Â© 2020 Edward'S. All rights reserved.
//

import Foundation
import SwiftUI

class CountriesDao: ObservableObject{
    
    @Published var favoritesArray: [Country] = []
    
    func addIntoFavorites(_ country: Country, _ reaction: String){
        favoritesArray.append(country)
        let indexOfCountry = countriesArray.firstIndex(of: country)!
        countriesArray[indexOfCountry].reaction = reaction
    }
    func removeFromFavorites(_ country: Country, _ reaction: String){
        let indexOfFavorite = favoritesArray.firstIndex(of: country)!
        favoritesArray.remove(at: indexOfFavorite)
        let indexOfCountry = countriesArray.firstIndex(of: country)!
        countriesArray[indexOfCountry].reaction = reaction
    }
    
    @Published var savedData: [String:(
        cases:String,
        deaths:String,
        recovered:String,
        newCases:String,
        newDeaths:String,
        deathsPercent:String,
        recoveredPercent:String,
        populationValue:String,
        populationPercent:Binding<Float>,
        lastUpdate:String
        )] = [:]
    @Published var countriesArray = [
        Country(name: "afghanistan", reaction: "heart"),
        Country(name: "albania", reaction: "heart"),
        Country(name: "algeria", reaction: "heart"),
        Country(name: "andorra", reaction: "heart"),
        Country(name: "angola", reaction: "heart"),
        Country(name: "anguilla", reaction: "heart"),
        Country(name: "antigua-and-barbuda", reaction: "heart"),
        Country(name: "argentina", reaction: "heart"),
        Country(name: "armenia", reaction: "heart"),
        Country(name: "aruba", reaction: "heart"),
        Country(name: "australia", reaction: "heart"),
        Country(name: "austria", reaction: "heart"),
        Country(name: "azerbaijan", reaction: "heart"),
        Country(name: "bahamas", reaction: "heart"),
        Country(name: "bahrain", reaction: "heart"),
        Country(name: "bangladesh", reaction: "heart"),
        Country(name: "barbados", reaction: "heart"),
        Country(name: "belarus", reaction: "heart"),
        Country(name: "belgium", reaction: "heart"),
        Country(name: "belize", reaction: "heart"),
        Country(name: "benin", reaction: "heart"),
        Country(name: "bermuda", reaction: "heart"),
        Country(name: "bhutan", reaction: "heart"),
        Country(name: "bolivia", reaction: "heart"),
        Country(name: "bosnia-and-herzegovina", reaction: "heart"),
        Country(name: "botswana", reaction: "heart"),
        Country(name: "brazil", reaction: "heart"),
        Country(name: "british-virgin-islands", reaction: "heart"),
        Country(name: "brunei-darussalam", reaction: "heart"),
        Country(name: "bulgaria", reaction: "heart"),
        Country(name: "burkina-faso", reaction: "heart"),
        Country(name: "burundi", reaction: "heart"),
        Country(name: "cabo-verde", reaction: "heart"),
        Country(name: "cambodia", reaction: "heart"),
        Country(name: "cameroon", reaction: "heart"),
        Country(name: "canada", reaction: "heart"),
        Country(name: "caribbean-netherlands", reaction: "heart"),
        Country(name: "cayman-islands", reaction: "heart"),
        Country(name: "central-african-republic", reaction: "heart"),
        Country(name: "chad", reaction: "heart"),
        Country(name: "channel-islands", reaction: "heart"),
        Country(name: "chile", reaction: "heart"),
        Country(name: "china", reaction: "heart"),
        Country(name: "china-hong-kong-sar", reaction: "heart"),
        Country(name: "china-macao-sar", reaction: "heart"),
        Country(name: "colombia", reaction: "heart"),
        Country(name: "congo", reaction: "heart"),
        Country(name: "costa-rica", reaction: "heart"),
        Country(name: "cote-d-ivoire", reaction: "heart"),
        Country(name: "croatia", reaction: "heart"),
        Country(name: "cuba", reaction: "heart"),
        Country(name: "curacao", reaction: "heart"),
        Country(name: "cyprus", reaction: "heart"),
        Country(name: "czech-republic", reaction: "heart"),
        Country(name: "democratic-republic-of-the-congo", reaction: "heart"),
        Country(name: "denmark", reaction: "heart"),
        Country(name: "djibouti", reaction: "heart"),
        Country(name: "dominica", reaction: "heart"),
        Country(name: "dominican-republic", reaction: "heart"),
        Country(name: "ecuador", reaction: "heart"),
        Country(name: "egypt", reaction: "heart"),
        Country(name: "el-salvador", reaction: "heart"),
        Country(name: "equatorial-guinea", reaction: "heart"),
        Country(name: "eritrea", reaction: "heart"),
        Country(name: "estonia", reaction: "heart"),
        Country(name: "ethiopia", reaction: "heart"),
        Country(name: "faeroe-islands", reaction: "heart"),
        Country(name: "falkland-islands-malvinas", reaction: "heart"),
        Country(name: "fiji", reaction: "heart"),
        Country(name: "finland", reaction: "heart"),
        Country(name: "france", reaction: "heart"),
        Country(name: "french-guiana", reaction: "heart"),
        Country(name: "french-polynesia", reaction: "heart"),
        Country(name: "gabon", reaction: "heart"),
        Country(name: "gambia", reaction: "heart"),
        Country(name: "georgia", reaction: "heart"),
        Country(name: "germany", reaction: "heart"),
        Country(name: "ghana", reaction: "heart"),
        Country(name: "gibraltar", reaction: "heart"),
        Country(name: "greece", reaction: "heart"),
        Country(name: "greenland", reaction: "heart"),
        Country(name: "grenada", reaction: "heart"),
        Country(name: "guadeloupe", reaction: "heart"),
        Country(name: "guatemala", reaction: "heart"),
        Country(name: "guinea", reaction: "heart"),
        Country(name: "guinea-bissau", reaction: "heart"),
        Country(name: "guyana", reaction: "heart"),
        Country(name: "haiti", reaction: "heart"),
        Country(name: "holy-see", reaction: "heart"),
        Country(name: "honduras", reaction: "heart"),
        Country(name: "hungary", reaction: "heart"),
        Country(name: "iceland", reaction: "heart"),
        Country(name: "india", reaction: "heart"),
        Country(name: "indonesia", reaction: "heart"),
        Country(name: "iran", reaction: "heart"),
        Country(name: "iraq", reaction: "heart"),
        Country(name: "ireland", reaction: "heart"),
        Country(name: "isle-of-man", reaction: "heart"),
        Country(name: "israel", reaction: "heart"),
        Country(name: "italy", reaction: "heart"),
        Country(name: "jamaica", reaction: "heart"),
        Country(name: "japan", reaction: "heart"),
        Country(name: "jordan", reaction: "heart"),
        Country(name: "kazakhstan", reaction: "heart"),
        Country(name: "kenya", reaction: "heart"),
        Country(name: "kuwait", reaction: "heart"),
        Country(name: "kyrgyzstan", reaction: "heart"),
        Country(name: "laos", reaction: "heart"),
        Country(name: "latvia", reaction: "heart"),
        Country(name: "lebanon", reaction: "heart"),
        Country(name: "liberia", reaction: "heart"),
        Country(name: "libya", reaction: "heart"),
        Country(name: "liechtenstein", reaction: "heart"),
        Country(name: "lithuania", reaction: "heart"),
        Country(name: "luxembourg", reaction: "heart"),
        Country(name: "macedonia", reaction: "heart"),
        Country(name: "madagascar", reaction: "heart"),
        Country(name: "malawi", reaction: "heart"),
        Country(name: "malaysia", reaction: "heart"),
        Country(name: "maldives", reaction: "heart"),
        Country(name: "mali", reaction: "heart"),
        Country(name: "malta", reaction: "heart"),
        Country(name: "martinique", reaction: "heart"),
        Country(name: "mauritania", reaction: "heart"),
        Country(name: "mauritius", reaction: "heart"),
        Country(name: "mayotte", reaction: "heart"),
        Country(name: "mexico", reaction: "heart"),
        Country(name: "moldova", reaction: "heart"),
        Country(name: "monaco", reaction: "heart"),
        Country(name: "mongolia", reaction: "heart"),
        Country(name: "montenegro", reaction: "heart"),
        Country(name: "montserrat", reaction: "heart"),
        Country(name: "morocco", reaction: "heart"),
        Country(name: "mozambique", reaction: "heart"),
        Country(name: "myanmar", reaction: "heart"),
        Country(name: "namibia", reaction: "heart"),
        Country(name: "nepal", reaction: "heart"),
        Country(name: "netherlands", reaction: "heart"),
        Country(name: "new-caledonia", reaction: "heart"),
        Country(name: "new-zealand", reaction: "heart"),
        Country(name: "nicaragua", reaction: "heart"),
        Country(name: "niger", reaction: "heart"),
        Country(name: "nigeria", reaction: "heart"),
        Country(name: "norway", reaction: "heart"),
        Country(name: "oman", reaction: "heart"),
        Country(name: "pakistan", reaction: "heart"),
        Country(name: "panama", reaction: "heart"),
        Country(name: "papua-new-guinea", reaction: "heart"),
        Country(name: "paraguay", reaction: "heart"),
        Country(name: "peru", reaction: "heart"),
        Country(name: "philippines", reaction: "heart"),
        Country(name: "poland", reaction: "heart"),
        Country(name: "portugal", reaction: "heart"),
        Country(name: "qatar", reaction: "heart"),
        Country(name: "reunion", reaction: "heart"),
        Country(name: "romania", reaction: "heart"),
        Country(name: "russia", reaction: "heart"),
        Country(name: "rwanda", reaction: "heart"),
        Country(name: "saint-barthelemy", reaction: "heart"),
        Country(name: "saint-kitts-and-nevis", reaction: "heart"),
        Country(name: "saint-lucia", reaction: "heart"),
        Country(name: "saint-martin", reaction: "heart"),
        Country(name: "saint-pierre-and-miquelon", reaction: "heart"),
        Country(name: "saint-vincent-and-the-grenadines", reaction: "heart"),
        Country(name: "san-marino", reaction: "heart"),
        Country(name: "sao-tome-and-principe", reaction: "heart"),
        Country(name: "saudi-arabia", reaction: "heart"),
        Country(name: "senegal", reaction: "heart"),
        Country(name: "serbia", reaction: "heart"),
        Country(name: "seychelles", reaction: "heart"),
        Country(name: "sierra-leone", reaction: "heart"),
        Country(name: "singapore", reaction: "heart"),
        Country(name: "sint-maarten", reaction: "heart"),
        Country(name: "slovakia", reaction: "heart"),
        Country(name: "slovenia", reaction: "heart"),
        Country(name: "somalia", reaction: "heart"),
        Country(name: "south-africa", reaction: "heart"),
        Country(name: "south-korea", reaction: "heart"),
        Country(name: "south-sudan", reaction: "heart"),
        Country(name: "spain", reaction: "heart"),
        Country(name: "sri-lanka", reaction: "heart"),
        Country(name: "state-of-palestine", reaction: "heart"),
        Country(name: "sudan", reaction: "heart"),
        Country(name: "suriname", reaction: "heart"),
        Country(name: "swaziland", reaction: "heart"),
        Country(name: "sweden", reaction: "heart"),
        Country(name: "switzerland", reaction: "heart"),
        Country(name: "syria", reaction: "heart"),
        Country(name: "taiwan", reaction: "heart"),
        Country(name: "tanzania", reaction: "heart"),
        Country(name: "thailand", reaction: "heart"),
        Country(name: "timor-leste", reaction: "heart"),
        Country(name: "togo", reaction: "heart"),
        Country(name: "trinidad-and-tobago", reaction: "heart"),
        Country(name: "tunisia", reaction: "heart"),
        Country(name: "turkey", reaction: "heart"),
        Country(name: "turks-and-caicos-islands", reaction: "heart"),
        Country(name: "uganda", reaction: "heart"),
        Country(name: "uk", reaction: "heart"),
        Country(name: "ukraine", reaction: "heart"),
        Country(name: "united-arab-emirates", reaction: "heart"),
        Country(name: "uruguay", reaction: "heart"),
        Country(name: "us", reaction: "heart"),
        Country(name: "uzbekistan", reaction: "heart"),
        Country(name: "venezuela", reaction: "heart"),
        Country(name: "viet-nam", reaction: "heart"),
        Country(name: "western-sahara", reaction: "heart"),
        Country(name: "zambia", reaction: "heart"),
        Country(name: "zimbabwe", reaction: "heart"),
    ]
    
    func saveData(countryName:String,
                  cases:String,
                  deaths:String,
                  recovered:String,
                  newCases:String,
                  newDeaths:String,
                  deathsPercent:String,
                  recoveredPercent:String,
                  populationValue:String,
                  populationPercent:Binding<Float>,
                  lastUpdate:String) -> Void {
        self.savedData[countryName] = (cases,
                                       deaths,
                                       recovered,
                                       newCases,
                                       newDeaths,
                                       deathsPercent,
                                       recoveredPercent,
                                       populationValue,
                                       populationPercent,
                                       lastUpdate)
    }
    
    #if DEBUG
    let testData = [
        Country(name: "china", reaction: "heart"),
        Country(name: "croatia", reaction: "heart"),
        Country(name: "italy", reaction: "heart"),
        Country(name: "russia", reaction: "heart"),
        Country(name: "us", reaction: "heart"),
    ]
    #endif
}
